{% extends 'base.html.twig' %}


{% block title %}
	Fiche d'intervention
{% endblock %}

{% block body %}
	{% include 'layouts/_nav.html.twig' %}
	<div class="container-contact100">
		<div class="wrap-contact100 pt-1">
			{{ form_start(form,{
                'attr' : {
                }
            }) }}
			<div class="mb-3 text-center">
				<img src="{{asset('img/ucad.jpg')}}" alt="Logo ucad" style="width:200px">
			</div>
			<span class="contact100-form-title">
				Fiche d'Intervention N°
				{{ demande.id }}
			</span>

			<div class="row">
				<div class="col-md-6">
					<label for="demande_intervention_nomDemandeur" class="form-label">Nom du demandeur
					</label>
					{{form_widget(form.nomDemandeur, {'attr': {'readonly':'true'}})}}
					{{form_errors(form.nomDemandeur)}}
				</div>
				<div class="col-md-6">
					<label for="demande_intervention_contactDemandeur" class="form-label">Contact
					</label>
					{{form_widget(form.contactDemandeur, {'attr': {'readonly':'true'}})}}
					{{form_errors(form.contactDemandeur)}}
				</div>
			</div>
			<div class="row mt-3">
				<div class="col-md-6">
					<label for="demande_intervention_emailDemandeur" class="form-label">Adresse email
					</label>
					{{form_widget(form.emailDemandeur, {'attr': {'readonly':'true'}})}}
					{{form_errors(form.emailDemandeur)}}
				</div>
				<div class="col-md-6">
					<label for="demande_intervention_fonction" class="form-label">Fonction
					</label>
					{{form_widget(form.fonction, {'attr': {'readonly':'true'}})}}
					{{form_errors(form.fonction)}}
				</div>
			</div>
			<div class="row mt-3">
				<div class="col-md-6">
					<label for="demande_intervention_poleConcerne" class="form-label">Le type de defaillance
					</label>
					{{form_widget(form.poleConcerne, {'attr': {'readonly':'true'}})}}
					{{form_errors(form.poleConcerne)}}
				</div>
				<div class="col-md-6">
					<label for="demande_intervention_causeDefaillance" class="form-label">La cause de la defaillance</label>
					{{form_widget(form.causeDefaillance, {'attr': {'readonly':'true'}})}}
					{{form_errors(form.causeDefaillance)}}
				</div>
			</div>

			<div class="mt-3">
				<label for="demande_intervention_priorite" class="form-label">Urgence de la demande
				</label>
				{{form_widget(form.priorite, {'attr': {'readonly':'true'}})}}
				{{form_errors(form.priorite)}}
			</div>

			<div class="mt-3">
				<label for="demande_intervention_description" class="form-label">Description de la demande</label>
				{{form_widget(form.description, {'attr': {'readonly':'true'}})}}
				{{form_errors(form.description)}}
			</div>
			<div class="row mt-3">
				<div class="col-md-6">
					<label for="demande_intervention_departement" class="form-label">Département ou service
					</label>
					{{form_widget(form.departement, {'attr': {'readonly':'true'}})}}
					{{form_errors(form.departement)}}
				</div>
				<div class="col-md-6">
					<label for="demande_intervention_dureeIntervention" class="form-label">Durée de l'intervention
					</label><br>
					<div class="col">
						{{form_widget(form.dureeIntervention)}}
						{{form_errors(form.dureeIntervention)}}
					</div>
				</div>
			</div>

			<div class="row mt-4 justify-content-center">
				{% if demande.statut == "EN_ATTENTE" %}
					<div class="col-md-6 mb-2 text-center">
						<a class="btn btn-outline-main" href="{{ path('app_ask_manage_begin', {id: demande.id}) }}">Commencer l'intervention</a><br>
					</div>
				{% elseif demande.statut == "EN_COURS" %}

					<div class="col-md-6 text-center">
						<button type="submit" class="btn btn-outline-success">Marquer comme terminée</button>
					</div>
				{% else %}
					<div class="col-md-6 text-center btn-success p-2">
						Intervention terminée
					</div>
				{% endif %}
			</div>

			{{ form_end(form) }}
		</div>
	</div>
{% endblock %}
